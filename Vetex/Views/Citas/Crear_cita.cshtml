@{
    ViewData["Title"] = "Nueva cita";
    var hoy = DateTime.Today;
}

<style>
    .page-wrap {
        background: #2b9ed9;
        padding: 14px;
        border-radius: 16px;
        max-width: 1100px;
        margin: auto;
    }

    .card-wrap {
        background: #e9e9e9;
        border-radius: 12px;
        padding: 22px;
        position: relative;
    }

    /* Encabezado con logo a la derecha (deja espacio para la imagen) */
    .header-row {
        display: flex;
        align-items: center;
        justify-content: space-between;
    }

    .logo-box {
        width: 80px;
        height: 60px;
        display: flex;
        align-items: center;
        justify-content: center;
    }

        .logo-box img {
            max-height: 60px;
            max-width: 80px;
        }

    /* Inputs dueño/mascota */
    .label-strong {
        font-weight: 800;
        font-size: 1.05rem;
        color: #1e1e1e;
    }

    .search-group {
        display: flex;
        align-items: center;
        gap: 8px;
    }

    .search-input {
        background: #fff;
        border: 2px solid #cfcfcf;
        border-radius: 6px;
        padding: 8px 10px;
        width: 300px;
    }

    .icon-btn {
        border: none;
        background: #2b9ed9;
        color: #fff;
        border-radius: 8px;
        padding: 8px 10px;
        font-weight: 600;
    }

        .icon-btn:hover {
            filter: brightness(.95);
        }

    /* Título central */
    .hero-title {
        font-weight: 800;
        font-size: 1.6rem;
        text-align: center;
        margin-top: 6px;
        color: #232323;
    }

    /* Selector de tipo de cita */
    .tipo-wrap {
        display: flex;
        gap: 10px;
        justify-content: center;
        margin: 10px 0 6px;
    }

    .tipo-chip {
        border: 2px solid #a5a5a5;
        background: #f5f5f5;
        padding: 6px 12px;
        border-radius: 8px;
        font-weight: 600;
        cursor: pointer;
        user-select: none;
    }

        .tipo-chip.active {
            background: #2b9ed9;
            border-color: #2b9ed9;
            color: #fff;
        }

    /* Bloque “Selección de hora” */
    .subcard {
        background: #eae2e7;
        border-radius: 12px;
        padding: 12px;
        text-align: center;
        margin: 8px auto 14px;
        max-width: 480px;
    }

        .subcard small {
            color: #5a5a5a;
            font-weight: 600;
        }

    /* Grilla principal */
    .grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 24px;
        margin-top: 10px;
    }

    /* Calendario (usa input date vestido como tarjeta) */
    .calendar-card {
        background: #f6f2f6;
        border-radius: 14px;
        padding: 16px;
        border: 1px solid #ddd;
    }

        .calendar-card .date-label {
            font-weight: 700;
            margin-bottom: 8px;
        }

    .date-input {
        width: 100%;
        padding: 10px;
        border-radius: 8px;
        border: 1px solid #cfcfcf;
        background: #fff;
    }

    /* Panel horarios */
    .horas-card {
        background: #f6f2f6;
        border-radius: 20px;
        padding: 16px;
        border: 1px solid #ddd;
    }

    .horas-list {
        list-style: none;
        margin: 0;
        padding: 0 8px;
        max-height: 470px;
        overflow: auto;
    }

    .hora-item {
        display: grid;
        grid-template-columns: 1fr auto;
        align-items: center;
        padding: 8px 6px;
        border-bottom: 1px solid #ececec;
        font-weight: 600;
        color: #303030;
    }

        .hora-item:last-child {
            border-bottom: none;
        }

    .hora-check {
        width: 18px;
        height: 18px;
    }

    /* Botón agendar */
    .actions {
        margin-top: 16px;
    }

    .btn-agendar {
        background: #2b9ed9;
        color: #fff;
        border: none;
        border-radius: 10px;
        padding: 12px 20px;
        font-weight: 700;
        min-width: 180px;
    }

        .btn-agendar:hover {
            filter: brightness(.95);
        }

   

    {
        grid-template-columns: 1fr;
    }

    .search-input {
        width: 100%;
    }

    }
</style>

<div class="page-wrap">
    <div class="card-wrap">

        <div class="header-row">
            <!-- Inputs dueño / mascota -->
            <div>
                <div class="search-group mb-2">
                    <label class="label-strong me-2">Dueño:</label>
                    <input class="search-input" type="text" placeholder="Buscar dueño..." />
                    <button type="button" class="icon-btn">🔍</button>
                </div>
                <div class="search-group">
                    <label class="label-strong me-2">Mascota:</label>
                    <input class="search-input" type="text" placeholder="Buscar mascota..." />
                    <button type="button" class="icon-btn">🔍</button>
                </div>
            </div>

            <div class="hero-title">Que Necesitas Hoy</div>

            <!-- Espacio del logo (coloca tu imagen en wwwroot/images/logo.png) -->
            <div class="logo-box">
                <img src="~/images/logo.png" alt="Logo Vetex" />
            </div>
        </div>

        <!-- Selector de tipo de cita -->
        <div class="tipo-wrap">
            <div class="tipo-chip active" data-tipo="Consulta General">Consulta General</div>
            <div class="tipo-chip" data-tipo="Cirugía">Cirugía</div>
            <div class="tipo-chip" data-tipo="Aseo">Aseo</div>
        </div>

        <!-- Subtítulo Selección de hora -->
        <div class="subcard">
            <div style="font-weight:800;">Selección de hora</div>
            <small id="lblFechaSub">Mostrando horarios para el @hoy.ToString("d 'de' MMMM 'de' yyyy")</small>
        </div>

        <div class="grid">
            <!-- Columna izquierda: calendario “tarjeta” + botón -->
            <div>
                <div class="calendar-card mb-3">
                    <div class="date-label">Fecha</div>
                    <input id="fecha" class="date-input" type="date" value="@hoy.ToString("yyyy-MM-dd")" />
                </div>

                <div class="actions">
                    <button type="button" class="btn-agendar">Agendar cita</button>
                </div>
            </div>

            <!-- Columna derecha: lista de horas -->
            <div>
                <div class="horas-card">
                    <ul class="horas-list">
                        <!-- Mismo set de horas del mockup; usa checkbox para permitir una selección (puedes cambiar a radio si quieres una sola) -->
                        <li class="hora-item"><span>8:00 AM</span> <input class="hora-check" type="radio" name="hora" value="08:00" /></li>
                        <li class="hora-item"><span>10:00 AM</span> <input class="hora-check" type="radio" name="hora" value="10:00" /></li>
                        <li class="hora-item"><span>12:00 AM</span> <input class="hora-check" type="radio" name="hora" value="00:00" /></li>
                        <li class="hora-item"><span>1:00 PM</span> <input class="hora-check" type="radio" name="hora" value="13:00" /></li>
                        <li class="hora-item"><span>2:00 PM</span> <input class="hora-check" type="radio" name="hora" value="14:00" /></li>
                        <li class="hora-item"><span>2:30 PM</span> <input class="hora-check" type="radio" name="hora" value="14:30" /></li>
                        <li class="hora-item"><span>3:00 PM</span> <input class="hora-check" type="radio" name="hora" value="15:00" /></li>
                        <li class="hora-item"><span>3:30 PM</span> <input class="hora-check" type="radio" name="hora" value="15:30" /></li>
                        <li class="hora-item"><span>4:00 PM</span> <input class="hora-check" type="radio" name="hora" value="16:00" /></li>
                    </ul>
                </div>
            </div>
        </div>

    </div>
</div>

@section Scripts {
    <script>
        // Cambiar “chip” activo de tipo de cita
        document.querySelectorAll('.tipo-chip').forEach(el => {
            el.addEventListener('click', () => {
                document.querySelectorAll('.tipo-chip').forEach(x => x.classList.remove('active'));
                el.classList.add('active');
            });
        });

        // Actualiza el texto de “Mostrando horarios para …” al cambiar la fecha
        const fecha = document.getElementById('fecha');
        const lbl = document.getElementById('lblFechaSub');

        function formatLatinDate(dateStr){
            const d = new Date(dateStr);
            const fmt = new Intl.DateTimeFormat('es-SV', { day:'numeric', month:'long', year:'numeric' });
            return fmt.format(d);
        }
        fecha.addEventListener('change', () => {
            lbl.textContent = 'Mostrando horarios para el ' + formatLatinDate(fecha.value);
        });
    </script>
}
